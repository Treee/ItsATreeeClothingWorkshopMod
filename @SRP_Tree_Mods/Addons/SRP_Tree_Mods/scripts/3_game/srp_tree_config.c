ref array<string> SRP_SoundSets_Yawns_Male = {
  "SRP_Tree_Mods_Yawn_Male_SoundSet1",
  "SRP_Tree_Mods_Yawn_Male_SoundSet2",
  "SRP_Tree_Mods_Yawn_Male_SoundSet3",
  "SRP_Tree_Mods_Yawn_Male_SoundSet4"
};

ref array<string> SRP_SoundSets_Yawns_Female = {
  "SRP_Tree_Mods_Yawn_Female_SoundSet1",
  "SRP_Tree_Mods_Yawn_Female_SoundSet2",
  "SRP_Tree_Mods_Yawn_Female_SoundSet3",
  "SRP_Tree_Mods_Yawn_Female_SoundSet4",
  "SRP_Tree_Mods_Yawn_Female_SoundSet5",
};

ref array<string> SRP_SoundSets_ZombieAttack = {
  "Zmb_Attack_Light1_SoundSet",
  "Zmb_Attack_Light2_SoundSet",
  "ZmbM_Skinny_Old_LightHit_Soundset",
  "ZmbM_Fat_LightHit_Soundset",
  "ZmbF_Normal_LightHit_Soundset",
  "ZmbM_Skinny_LightHit_Soundset",
  "ZmbF_Skinny_LightHit_Soundset",
  "ZmbM_Normal_Old_LightHit_Soundset",
  "ZmbM_Old_LightHit_Soundset",
  "ZmbM_Normal_LightHit_Soundset",
  "ZmbM_Normal2_LightHit_Soundset",
  "ZmbF_Fat_LightHit_Soundset",
  "ZmbF_Old_LightHit_Soundset"
  "ZmbM_Skinny_Old_Attack_Soundset",
  "ZmbM_Fat_Attack_Soundset",
  "ZmbF_Normal_Attack_Soundset",
  "ZmbM_Skinny_Attack_Soundset",
  "ZmbF_Skinny_Attack_Soundset",
  "ZmbM_Normal_Old_Attack_Soundset",
  "ZmbM_Old_Attack_Soundset",
  "ZmbM_Normal_Attack_Soundset",
  "ZmbM_Normal2_Attack_Soundset",
  "ZmbF_Fat_Attack_Soundset",
  "ZmbF_Old_Attack_Soundset"
  "Zmb_Attack_Heavy1_SoundSet",
  "Zmb_Attack_Heavy2_SoundSet",
  "Zmb_Attack_TwoHands_SoundSet",
  "ZmbM_Fat_HeavyHit_Soundset",
  "ZmbM_Skinny_Old_HeavyHit_Soundset",
  "ZmbF_Normal_HeavyHit_Soundset",
  "ZmbM_Skinny_HeavyHit_Soundset",
  "ZmbF_Skinny_HeavyHit_Soundset",
  "ZmbM_Normal_Old_HeavyHit_Soundset",
  "ZmbM_Old_HeavyHit_Soundset",
  "ZmbM_Normal_HeavyHit_Soundset",
  "ZmbM_Normal2_HeavyHit_Soundset",
  "ZmbF_Fat_HeavyHit_Soundset",
  "ZmbF_Old_HeavyHit_Soundset"
};

ref array<string> SRP_SoundSets_Jumping = {
  "ZmbM_Skinny_Old_Jump_Soundset",
  "ZmbM_Fat_Jump_Soundset",
  "ZmbF_Normal_Jump_Soundset",
  "ZmbM_Skinny_Jump_Soundset",
  "ZmbF_Skinny_Jump_Soundset",
  "ZmbM_Normal_Old_Jump_Soundset",
  "ZmbM_Old_Jump_Soundset",
  "ZmbM_Normal_Jump_Soundset",
  "ZmbM_Normal2_Jump_Soundset",
  "ZmbF_Fat_Jump_Soundset",
  "ZmbF_Old_Jump_Soundset"
};

ref array<string> SRP_SoundSets_Landing = {
  "ZmbM_Skinny_Old_Land_Soundset",
  "ZmbM_Fat_Land_Soundset",
  "ZmbF_Normal_Land_Soundset",
  "ZmbM_Skinny_Land_Soundset",
  "ZmbF_Skinny_Land_Soundset",
  "ZmbM_Normal_Old_Land_Soundset",
  "ZmbM_Old_Land_Soundset",
  "ZmbM_Normal_Land_Soundset",
  "ZmbM_Normal2_Land_Soundset",
  "ZmbF_Fat_Land_Soundset",
  "ZmbF_Old_Land_Soundset"
};

ref array<string> SRP_SoundSets_CallToArms = {
  "ZmbM_Skinny_Old_CallToArmsShort_Soundset",      
  "ZmbM_Fat_CallToArmsShort_Soundset",          
  "ZmbF_Normal_CallToArmsShort_Soundset",          
  "ZmbM_Skinny_CallToArmsShort_Soundset",          
  "ZmbF_Skinny_CallToArmsShort_Soundset",          
  "ZmbM_Normal_Old_CallToArmsShort_Soundset",          
  "ZmbM_Old_CallToArmsShort_Soundset",          
  "ZmbM_Normal_CallToArmsShort_Soundset",          
  "ZmbM_Normal2_CallToArmsShort_Soundset",          
  "ZmbF_Fat_CallToArmsShort_Soundset",          
  "ZmbF_Old_CallToArmsShort_Soundset"
};

ref array<string> SRP_SoundSets_SheepBleats = {
  "SheepBleat_A_SoundSet",
  "SheepBleat_B_SoundSet",
  "SheepBleat_C_SoundSet",
  "SheepBleat_D_SoundSet",
  "SheepBleat_E_SoundSet",
  "SheepBleat_F_SoundSet",
  "SheepBleat_G_SoundSet",
  "SheepBleat_H_SoundSet",
  "SheepBleatX1_SoundSet",
  "SheepBleatX2_SoundSet",
  "SheepBleatX3_SoundSet",
  "SheepBleatX4_SoundSet",
  "SheepBleatX5_SoundSet",
};

ref array<string> SRP_SoundSets_HogGrunts = {
  "HogGrunt_A_SoundSet",
  "HogGrunt_A_Squeal_SoundSet",
  "HogGrunt_B_SoundSet",
  "HogGrunt_B_Long_SoundSet",
  "HogGrunt_C_SoundSet",
  "HogGrunt_D_SoundSet",
  "HogGrunt_E_SoundSet",
  "HogGrunt_F_SoundSet",
  "HogGrunt_G_SoundSet",
  "HogGrunt_H_SoundSet",
  "HogGrunt_I_SoundSet",
  "HogSniff_SoundSet",
  "HogSqueal_SoundSet",
  "HogSscratch3_SoundSet",
  "HogSscratch4_SoundSet",
  "HogClaw_SoundSet",
};

ref array<string> SRP_SoundSets_Bear = {
  "BearAttack_SoundSet",
  "BearBreath_SoundSet",
  "BearGrowl_SoundSet",
  "BearMumble_SoundSet",
  "BearRoar_SoundSet",
  "BearRoarShort_SoundSet",
  "BearSigh_SoundSet",
  "BearSighLong_SoundSet",
  "BearSighShort_SoundSet",
  "BearSnarl_SoundSet",
  "BearSnarlLong_SoundSet",
  "BearSnort_SoundSet",
  "BearGrowl_1_SoundSet",
  "BearGrowl_3_SoundSet",
  "BearGrowl_4_SoundSet",
  "BearGrowl_5_SoundSet",
  "BearGrowl_6_SoundSet",
  "BearGrowl_7_SoundSet",
  "BearGrowl_8_SoundSet",
  "BearGrowl_9_SoundSet",
  "BearGrowl_10_SoundSet",
  "BearGrowl_12_SoundSet",
  "BearGrowl_13_SoundSet",
  "BearRoar_1_SoundSet",
  "BearRoar_2_SoundSet",
  "BearRoar_3_SoundSet",
  "BearRoar_5_SoundSet",
  "BearRoar_6_SoundSet",
  "BearRoar_7_SoundSet",
  "BearSighLong_0_SoundSet",
  "BearSighLong_1_SoundSet",
  "BearSighLong_2_SoundSet",
  "BearSnarlLong_0_SoundSet",
  "BearSnarlLong_1_SoundSet",
  "BearSnarlLong_2_SoundSet"
};

ref array<string> SRP_SoundSets_Wolf = {
  "WolfBark_SoundSet",
  "WolfBark_SoundSet",
  "WolfBark_SoundSet",
  "WolfBark2_SoundSet",
  "WolfBark3_SoundSet",
  "WolfBreath_SoundSet",
  "WolfGroans_SoundSet",
  "WolfGrowl_A_SoundSet",
  "WolfGrowl_B_SoundSet",
  "WolfGrowl_A_SoundSet",
  "WolfPant_SoundSet",
  "WolfPantShort_SoundSet",
  "WolfPantShort_SoundSet",
  "WolfSnarl_SoundSet",
  "WolfSnarlShort_SoundSet",
  "WolfWhimper_SoundSet",
  "WolfYelp_SoundSet",
  "WolfYelp_SoundSet",
  "WolfDeath_SoundSet",
  "WolfHowl_SoundSet",
  "WolfHowls_SoundSet",
};

ref array<string> SRP_SoundSets_Cows = {
  "CattleBawl_SoundSet",
  "CattleBellow_SoundSet",
  "CattleBreath_SoundSet",
  "CattleGroan_SoundSet",
  "CattleHoarse_SoundSet",
  "CattleHonk_SoundSet",
  "CattleMooA_SoundSet",
  "CattleMooALong_SoundSet",
  "CattleMooB_SoundSet",
  "CattleMooC_SoundSet",
  "CattleRoar_SoundSet",
  "CattleSigh_SoundSet",
  "CattleSighLong_SoundSet",
  "CattleMooX1_SoundSet",
  "CattleMooX1_Tail_SoundSet",
  "CattleMooX2_SoundSet",
  "CattleMooX2_Tail_SoundSet",
  "CattleMooX3_SoundSet",
  "CattleMooX3_Tail_SoundSet",
  "CattleMooX4_SoundSet",
  "CattleMooX4_Tail_SoundSet",
  "CattleMooX5_SoundSet",
  "CattleMooX5_Tail_SoundSet",
  "CattleSnort_SoundSet"
};

ref array<string> SRP_SoundSets_Deer = {
  "DeerBleat_SoundSet",
  "DoeBleat_SoundSet",
  "DeerBreath_SoundSet",
  "DeerBark_SoundSet",
  "DoeBark_SoundSet",
  "RoeBark_SoundSet",
  "DeerCall_SoundSet",
  "DeerCallFear_SoundSet",
  "DeerGrunt_SoundSet",
  "DeerRoar_SoundSet",
  "DeerRoarLong_SoundSet",
  "DeerRoarShort_SoundSet",
  "DeerSnort_SoundSet",
  "RoeBarkX1_SoundSet",
  "RoeBarkX1_Tail_SoundSet",
  "RoeBarkX2_SoundSet",
  "RoeBarkX2_Tail_SoundSet",
  "RoeBarkX3_SoundSet",
  "RoeBarkX3_Tail_SoundSet",
  "RoeBarkX4_SoundSet",
  "RoeBarkX4_Tail_SoundSet",
  "RoeBarkX5_SoundSet",
  "RoeBarkX5_Tail_SoundSet"
};

ref array<string> SRP_SoundSets_Chicken = {
  "HenChick_SoundSet",
  "HenCluck_A_SoundSet",
  "HenCluck_A_High_SoundSet",
  "HenCluck_B_SoundSet",
  "HenCluck_B_High_SoundSet",
  "HenCluck_C_SoundSet",
  "HenCluck_C_High_SoundSet",
  "HenCluck_D_SoundSet",
  "HenCluck_D_High_SoundSet",
  "HenCluck_E_SoundSet",
  "HenCluck_E_High_SoundSet",
  "HenCluck_Silky_SoundSet",
  "HenCluck_Silky_High_SoundSet",
  "HenCrow_A_SoundSet",
  "HenCrow_B_SoundSet",
  "HenCrow_C_SoundSet",
  "HenCrow_D_SoundSet",
  "HenCrow_E_SoundSet",
  "HenCrow_F_SoundSet",
  "HenCrow_G_SoundSet",
  "HenScream_SoundSet",
  "BirdFlapping_SoundSet",
  "BirdFlapping_short_SoundSet",
  "BirdFlapping_mid_SoundSet",
  "BirdFlapping_long_SoundSet",
  "HenCrowX1_SoundSet",
};

ref array<string> SRP_DamageZones_LightBleeding = {
  "Head",
  "Neck",
  "Pelvis",
  "Spine",
  "Spine1",
  "Spine2",
  "Spine3",
  "LeftForeArmRoll",
  "RightForeArmRoll",
  "LeftFoot",
  "LeftToeBase",
  "RightFoot",
  "RightToeBase"
};

class BioHazardZoneLocation
{
  vector center;
  int totalRadius;
  int criticalRadius;
  int severeRadius;
  int mildRadius;
  int messageRepeatInterval;

  void SetBioHazardZoneLocation(vector m_center, int m_totalRadius, int m_criticalRadius, int m_severeRadius, int m_mildRadius, int m_messageRepeatInterval)
  {
    center = m_center;
    totalRadius = m_totalRadius;
    criticalRadius = m_criticalRadius;
    severeRadius = m_severeRadius;
    mildRadius = m_mildRadius;    
    messageRepeatInterval = m_messageRepeatInterval;
  }

  bool isPlayerInZone(vector playerPosition)
  {
    return vector.Distance(playerPosition, center) < totalRadius;
  }
}

class SRPTreeConfig
{
  bool g_SRPIsSleepActive;
  bool g_SRPIsDrugsEffectsActive;
  bool g_SRPIsBioHazardLocationsActive;
  
  int g_SRPSleepMaximumAwakeTime;
  int g_SRPSleepYawnInterval;
  int g_SRPAlcoholModifierLifetime;
  int g_SRPBathSaltsModifierLifetime;
  int g_SRPMethModifierLifetime;
  int g_SRPSkullAcidModifierLifetime;
  int g_SRPSmileAcidModifierLifetime;
  int g_SRPStonedModifierLifetime;
  int g_SRPTobacoModifierLifetime;

  int g_SRPAlcoholFoodLossAmount;
  int g_SRPWeedWaterLossAmount;

  float g_SRPSleepynessIncreaseAmount;
  float g_SRPRestfulnessIncreaseAmount;
  float g_SRPSleepYawnThreshold;
  float g_SRPSleepPassOutThreshold;
  float g_SRPAlcoholChanceToLaughThreshold;
  float g_SRPBathSaltsChanceForScarySound;
  float g_SRPBathSaltsChanceForHappySound;
  float g_SRPMethSaminaDepletionBonus;
  float g_SRPMethBloodLossAmount;
  float g_SRPMethChanceForScarySound;
  float g_SRPMethChanceForHappySound;
  float g_SRPSkullAcidChanceForScarySound;
  float g_SRPSkullAcidChanceForHappySound;
  float g_SRPSkullAcidChanceForLaughter;
  float g_SRPSkullAcidChanceForFreeze;
  float g_SRPSkullAcidChanceForSweat;
  float g_SRPSkullAcidChanceForSneeze;
  float g_SRPSkullAcidChanceForCough;
  float g_SRPSmileAcidChanceForScarySound;
  float g_SRPSmileAcidChanceForHappySound;
  float g_SRPSmileAcidChanceForLaughter;
  float g_SRPSmileAcidChanceForFreeze;
  float g_SRPSmileAcidChanceForSweat;
  float g_SRPSmileAcidChanceForSneeze;
  float g_SRPSmileAcidChanceForCough;  
  float g_SRPWeedChanceForCough;
  float g_SRPWeedChanceForLaugh;
  float g_SRPTobaccoChanceForCough;

  ref array<ref BioHazardZoneLocation> g_SRPBiohazardZoneLocations;
}

class SRPTreeGlobals
{
  private static ref SRPTreeConfig m_SRPConfig = NULL;
  private static const int MAX_CONFIG_LINES = 500;
  private static const string configPath = "$profile:\\SRP_Tree_Mods\\Mod_Settings.json";
  private static const string configRoot = "$profile:\\SRP_Tree_Mods";

  static SRPTreeConfig Get()
  {
    if (m_SRPConfig == NULL) 
    {
      SetConfig();
    }
    return m_SRPConfig;
  }

  static void SetConfig()
  {
    m_SRPConfig = LoadSRPConfig();
  }

  private static SRPTreeConfig LoadSRPConfig()
  {
    SRPTreeConfig config = new SRPTreeConfig();
    if (!FileExist(configPath))
    {
      Print("'SRP_Tree_Mod_Settings' does not exist, creating now.");
      CreateDefaultConfigFile(config);
    }
    JsonFileLoader<SRPTreeConfig>.JsonLoadFile(configPath, config);
    Print("'SRP_Tree_Mod_Settings' found ... loading now.");
    return config;
  }

  private static void CreateDefaultConfigFile(inout SRPTreeConfig config)
  {
    config.g_SRPIsSleepActive = true;
    config.g_SRPIsDrugsEffectsActive = true;
    config.g_SRPIsBioHazardLocationsActive = true;

    config.g_SRPSleepMaximumAwakeTime = 14400; // 4 hours in seconds is the "max" awake time before passing out
    config.g_SRPSleepYawnInterval = 120;        // time in between yawns
    config.g_SRPAlcoholModifierLifetime = 100;
    config.g_SRPBathSaltsModifierLifetime = 600; // 10 minutes
    config.g_SRPMethModifierLifetime = 600;
    config.g_SRPSkullAcidModifierLifetime = 600;
    config.g_SRPSmileAcidModifierLifetime = 600;
    config.g_SRPStonedModifierLifetime = 150;
    config.g_SRPTobacoModifierLifetime = 90;

    config.g_SRPAlcoholFoodLossAmount = 0.2;
    config.g_SRPWeedWaterLossAmount = 0.2;

    config.g_SRPSleepynessIncreaseAmount = 1.5; // we get sleepy x units per
    config.g_SRPRestfulnessIncreaseAmount = 50; // we get rested x units per
    config.g_SRPSleepYawnThreshold = 0.8; // 80% sleepyness triggers yawning. 0% means yawning when fully awake
    config.g_SRPSleepPassOutThreshold = 600; // how many extra seconds do they get before they 100% pass out
    config.g_SRPAlcoholChanceToLaughThreshold = 15; // 15% chance to laugh
    config.g_SRPBathSaltsChanceForScarySound = 10; 
    config.g_SRPBathSaltsChanceForHappySound = 20;
    config.g_SRPMethSaminaDepletionBonus = 0.5; // stamina depletes 50% less than normal. 1 being the default
    config.g_SRPMethBloodLossAmount = 3.5; // be carefule with a higher number here
    config.g_SRPMethChanceForScarySound = 5; // 5% chance
    config.g_SRPMethChanceForHappySound = 5;
    config.g_SRPSkullAcidChanceForScarySound = 50;
    config.g_SRPSkullAcidChanceForHappySound = 60;
    config.g_SRPSkullAcidChanceForLaughter = 30; // ascending order,
    config.g_SRPSkullAcidChanceForFreeze = 40;
    config.g_SRPSkullAcidChanceForSweat = 50;
    config.g_SRPSkullAcidChanceForSneeze = 60;
    config.g_SRPSkullAcidChanceForCough = 70;
    config.g_SRPSmileAcidChanceForScarySound = 10;
    config.g_SRPSmileAcidChanceForHappySound = 50;
    config.g_SRPSmileAcidChanceForLaughter = 10;
    config.g_SRPSmileAcidChanceForFreeze = 30;
    config.g_SRPSmileAcidChanceForSweat = 60;
    config.g_SRPSmileAcidChanceForSneeze = 80;
    config.g_SRPSmileAcidChanceForCough = 95;
    config.g_SRPWeedChanceForCough = 35;
    config.g_SRPWeedChanceForLaugh = 70;
    config.g_SRPTobaccoChanceForCough = 35;

    ref array<ref BioHazardZoneLocation> m_locations = new ref array<ref BioHazardZoneLocation>;

    BioHazardZoneLocation bioLocation = new BioHazardZoneLocation;

    bioLocation.SetBioHazardZoneLocation("4683 20 7100", 350, 150, 250, 325, 120);

    m_locations.Insert(bioLocation);

    config.g_SRPBiohazardZoneLocations = m_locations;
    if (!FileExist(configRoot))
    {
      Print("'SRP_Tree_Mod_Settings' being saved in " + configRoot);
      MakeDirectory(configRoot);
    }
    JsonFileLoader<SRPTreeConfig>.JsonSaveFile(configPath, config);
  }
}